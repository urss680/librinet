```html
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Muñeca Gigante 3D - Roblox</title>
    <style>
        body {
            margin: 0;
            overflow: hidden;
            background: #000;
            font-family: "Segoe UI", Tahoma, Arial, sans-serif;
            color: #fff;
            user-select: none;
        }
        #hud {
            position: absolute;
            top: 10px;
            left: 10px;
            font-size: 24px;
            text-shadow: 2px 2px 4px #000;
        }
        #timer {
            position: absolute;
            top: 10px;
            right: 10px;
            font-size: 24px;
            text-shadow: 2px 2px 4px #000;
        }
        #light {
            position: absolute;
            top: 20px;
            right: 80px;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            border: 3px solid #fff;
            box-shadow: 0 0 20px #000;
            transition: background .3s;
        }
        #gameOver {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 48px;
            text-align: center;
            display: none;
        }
        #gameOver button {
            margin-top: 20px;
            padding: 10px 20px;
            font-size: 24px;
            border: none;
            background: #e00;
            color: #fff;
            cursor: pointer;
            border-radius: 6px;
        }
        #gameOver button:hover {
            background: #f22;
        }
    </style>
</head>
<body>
    <div id="hud">Vidas: <span id="lives">3</span></div>
    <div id="timer">Tiempo: <span id="time">0</span>s</div>
    <div id="light"></div>
    <div id="gameOver">
        <div id="msg"></div>
        <button onclick="location.reload()">Reiniciar</button>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/three@0.150.0/build/three.min.js"></script>
    <script>
        const scene = new THREE.Scene();
        scene.background = new THREE.Color(0x111111);
        scene.fog = new THREE.Fog(0x111111, 20, 120);

        const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
        camera.position.set(0, 10, 40);

        const renderer = new THREE.WebGLRenderer({ antialias: true });
        renderer.setSize(window.innerWidth, window.innerHeight);
        renderer.shadowMap.enabled = true;
        renderer.shadowMap.type = THREE.PCFSoftShadowMap;
        document.body.appendChild(renderer.domElement);

        const light = new THREE.DirectionalLight(0xffffff, 1);
        light.position.set(10, 30, 20);
        light.castShadow = true;
        light.shadow.mapSize.width = 2048;
        light.shadow.mapSize.height = 2048;
        scene.add(light);

        const ambient = new THREE.AmbientLight(0x404040);
        scene.add(ambient);

        const floor = new THREE.Mesh(
            new THREE.PlaneGeometry(200, 200),
            new THREE.MeshStandardMaterial({ color: 0x444444 })
        );
        floor.rotation.x = -Math.PI / 2;
        floor.position.y = -10;
        floor.receiveShadow = true;
        scene.add(floor);

        const doll = new THREE.Group();
        const skin = new THREE.MeshStandardMaterial({ color: 0xffccbc });
        const dress = new THREE.MeshStandardMaterial({ color: 0xe91e63 });
        const cloth = new THREE.MeshStandardMaterial({ color: 0xf48fb1 });

        // Cabeza
        const head = new THREE.Mesh(new THREE.SphereGeometry(4, 32, 32), skin);
        head.position.y = 20;
        head.castShadow = true;
        doll.add(head);

        // Ojos
        const eyeGeo = new THREE.SphereGeometry(1, 16, 16);
        const eyeMat = new THREE.MeshStandardMaterial({ color: 0xff0000 });
        const leftEye = new THREE.Mesh(eyeGeo, eyeMat);
        leftEye.position.set(-2, 21, 3.5);
        const rightEye = new THREE.Mesh(eyeGeo, eyeMat);
        rightEye.position.set(2, 21, 3.5);
        doll.add(leftEye, rightEye);

        // Torso
        const torso = new THREE.Mesh(new THREE.BoxGeometry(8, 12, 6), cloth);
        torso.position.y = 10;
        torso.castShadow = true;
        doll.add(torso);

        // Falda
        const skirt = new THREE.Mesh(new THREE.ConeGeometry(6, 10, 32), dress);
        skirt.position.y = 0;
        skirt.castShadow = true;
        doll.add(skirt);

        // Brazos
        const armGeo = new THREE.CylinderGeometry(1, 1, 12);
        const leftArm = new THREE.Mesh(armGeo, cloth);
        leftArm.position.set(-6, 12, 0);
        leftArm.rotation.z = Math.PI / 6;
        leftArm.castShadow = true;
        const rightArm = new THREE.Mesh(armGeo, cloth);
        rightArm.position.set(6, 12, 0);
        rightArm.rotation.z = -Math.PI / 6;
        rightArm.castShadow = true;
        doll.add(leftArm, rightArm);

        doll.position.set(0, 0, -30);
        scene.add(doll);

        const player = new THREE.Group();
        const playerMat = new THREE.MeshStandardMaterial({ color: 0x4caf50 });
        const body = new THREE.Mesh(new THREE.BoxGeometry(2, 4, 1), playerMat);
        body.castShadow = true;
        player.add(body);
        const headP = new THREE.Mesh(new THREE.SphereGeometry(1), playerMat);
        headP.position.y = 2.5;
        headP.castShadow = true;
        player.add(headP);
        player.position.set(0, -6, 20);
        scene.add(player);

        let redLight = true;
        let lives = 3;
        let timer = 0;
        let gameOver = false;
        let hugged = false;
        let married = false;

        const keys = {};
        window.addEventListener('keydown', e => keys[e.key] = true);
        window.addEventListener('keyup', e => keys[e.key] = false);

        function updatePlayer() {
            if (!gameOver) {
                if (keys['ArrowLeft']) player.position.x = Math.max(player.position.x - 0.5, -30);
                if (keys['ArrowRight']) player.position.x = Math.min(player.position.x + 0.5, 30);
                if (keys['ArrowUp']) player.position.z = Math.max(player.position.z - 0.5, -30);
                if (keys['ArrowDown']) player.position.z = Math.min(player.position.z + 0.5, 30);
            }
        }

        function animateEyes() {
            const color = redLight ? 0xff0000 : 0x00ff00;
            leftEye.material.color.set(color);
            rightEye.material.color.set(color);
            document.getElementById('light').style.background = redLight ? '#f44336' : '#4caf50';
        }

        function updateTimer() {
            if (!gameOver) {
                timer++;
                document.getElementById('time').textContent = timer;
                if (timer >= 30 && !hugged) {
                    hugged = true;
                    // Abrazo: muñeca se acerca y abraza
                    const hugTween = () => {
                        if (doll.position.z < 5) {
                            doll.position.z += 0.5;
                            leftArm.rotation.z = Math.min(leftArm.rotation.z + 0.05, Math.PI / 2);
                            rightArm.rotation.z = Math.max(rightArm.rotation.z - 0.05, -Math.PI / 2);
                            requestAnimationFrame(hugTween);
                        } else {
                            married = true;
                            document.getElementById('msg').innerHTML = '¡Novios y casados!<br><button onclick="location.reload()">Nueva partida</button>';
                            document.getElementById('gameOver').style.display = 'block';
                            gameOver = true;
                        }
                    };
                    hugTween();
                }
            }
        }

        function checkRedLight() {
            if (redLight && !gameOver) {
                const moving = keys['ArrowLeft'] || keys['ArrowRight'] || keys['ArrowUp'] || keys['ArrowDown'];
                if (moving) {
                    lives--;
                    document.getElementById('lives').textContent = lives;
                    if (lives <= 0) {
                        document.getElementById('msg').innerHTML = 'Perdiste<br><button onclick="location.reload()">Nueva partida</button>';
                        document.getElementById('gameOver').style.display = 'block';
                        gameOver = true;
                    }
                }
            }
        }

        function checkWin() {
            const distance = player.position.distanceTo(doll.position);
            if (distance < 10 && !gameOver) {
                document.getElementById('msg').innerHTML = '¡Ganaste!<br>¡Llegaste a la muñeca!<br><button onclick="location.reload()">Nueva partida</button>';
                document.getElementById('gameOver').style.display = 'block';
                gameOver = true;
            }
        }

        setInterval(() => {
            redLight = !redLight;
            animateEyes();
            checkRedLight();
        }, 2000);

        setInterval(updateTimer, 1000);

        function animate() {
            requestAnimationFrame(animate);
            updatePlayer();
            checkWin();
            renderer.render(scene, camera);
        }

        window.addEventListener('resize', () => {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        });

        animate();
    </script>
</body>
</html>
```