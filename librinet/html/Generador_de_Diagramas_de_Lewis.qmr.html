```html
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Generador de Diagramas de Lewis</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background: linear-gradient(135deg, #0f172a, #1e293b);
            color: #e2e8f0;
        }
        
        .container {
            background: rgba(30, 41, 59, 0.7);
            backdrop-filter: blur(10px);
            padding: 30px;
            border-radius: 16px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        h1 {
            color: #e2e8f0;
            text-align: center;
            margin-bottom: 30px;
            font-weight: 600;
            text-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }
        
        .input-section {
            margin-bottom: 30px;
            text-align: center;
        }
        
        input[type="text"] {
            padding: 12px 20px;
            font-size: 16px;
            border: 2px solid rgba(94, 234, 212, 0.3);
            border-radius: 8px;
            width: 300px;
            margin-right: 10px;
            background: rgba(15, 23, 42, 0.7);
            color: #e2e8f0;
            transition: all 0.3s ease;
        }
        
        input[type="text"]:focus {
            outline: none;
            border-color: #5eead4;
            box-shadow: 0 0 0 3px rgba(94, 234, 212, 0.2);
        }
        
        button {
            padding: 12px 24px;
            font-size: 16px;
            background: linear-gradient(to right, #0ea5e9, #06b6d4);
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        
        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
            background: linear-gradient(to right, #0284c7, #0891b2);
        }
        
        #canvas-container {
            text-align: center;
            margin-top: 30px;
        }
        
        canvas {
            border: 1px solid rgba(94, 234, 212, 0.2);
            border-radius: 12px;
            background: rgba(15, 23, 42, 0.5);
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);
        }
        
        .info {
            margin-top: 20px;
            padding: 20px;
            background: rgba(15, 23, 42, 0.7);
            border-radius: 12px;
            border-left: 4px solid #0ea5e9;
            box-shadow: inset 0 0 10px rgba(0, 0, 0, 0.2);
        }
        
        .error {
            color: #fecaca;
            margin-top: 10px;
            font-weight: bold;
        }
        
        .element-info {
            display: inline-block;
            margin: 8px;
            padding: 10px 15px;
            background: rgba(14, 165, 233, 0.15);
            border-radius: 8px;
            font-size: 14px;
            border: 1px solid rgba(94, 234, 212, 0.2);
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Generador de Diagramas de Lewis</h1>
        
        <div class="input-section">
            <input type="text" id="formula" placeholder="Ingrese fórmula química (ej: H2O, CO2, NH3)">
            <button onclick="generarDiagrama()">Generar Diagrama</button>
            <div id="error" class="error"></div>
        </div>
        
        <div id="canvas-container">
            <canvas id="canvas" width="800" height="600"></canvas>
        </div>
        
        <div class="info" id="info" style="display: none;">
            <h3>Información de la molécula:</h3>
            <div id="elementos-info"></div>
            <p id="electrones-total"></p>
            <p id="electrones-compartidos"></p>
            <p id="electrones-solos"></p>
        </div>
    </div>

    <script>
        const elementos = {
            'H': { valencia: 1, electronegatividad: 2.20, color: '#ffffff' },
            'C': { valencia: 4, electronegatividad: 2.55, color: '#333333' },
            'N': { valencia: 5, electronegatividad: 3.04, color: '#3050f8' },
            'O': { valencia: 6, electronegatividad: 3.44, color: '#ff0d0d' },
            'F': { valencia: 7, electronegatividad: 3.98, color: '#90e050' },
            'P': { valencia: 5, electronegatividad: 2.19, color: '#ff8000' },
            'S': { valencia: 6, electronegatividad: 2.58, color: '#ffff30' },
            'Cl': { valencia: 7, electronegatividad: 3.16, color: '#1ff01f' },
            'Br': { valencia: 7, electronegatividad: 2.96, color: '#a62929' },
            'I': { valencia: 7, electronegatividad: 2.66, color: '#940094' }
        };

        function parsearFormula(formula) {
            const regex = /([A-Z][a-z]*)(\d*)/g;
            const elementos = {};
            let match;
            
            while ((match = regex.exec(formula)) !== null) {
                const elemento = match[1];
                const cantidad = match[2] ? parseInt(match[2]) : 1;
                elementos[elemento] = (elementos[elemento] || 0) + cantidad;
            }
            
            return elementos;
        }

        function calcularElectronesTotales(elementos) {
            let total = 0;
            for (const [elemento, cantidad] of Object.entries(elementos)) {
                if (elemento === 'H') total += cantidad * 1;
                else if (elemento === 'C') total += cantidad * 4;
                else if (elemento === 'N') total += cantidad * 5;
                else if (elemento === 'O') total += cantidad * 6;
                else if (elemento === 'F') total += cantidad * 7;
                else if (elemento === 'P') total += cantidad * 5;
                else if (elemento === 'S') total += cantidad * 6;
                else if (elemento === 'Cl') total += cantidad * 7;
                else if (elemento === 'Br') total += cantidad * 7;
                else if (elemento === 'I') total += cantidad * 7;
            }
            return total;
        }

        function generarEstructura(elementos) {
            const atomos = Object.keys(elementos);
            const centro = atomos.find(e => e === 'C' || e === 'N' || e === 'P' || e === 'S') || atomos[0];
            const otros = atomos.filter(e => e !== centro);
            
            const estructura = [];
            const centroCantidad = elementos[centro];
            
            for (let i = 0; i < centroCantidad; i++) {
                estructura.push({
                    central: centro,
                    conectados: []
                });
            }
            
            let centroIndex = 0;
            for (const elemento of otros) {
                for (let i = 0; i < elementos[elemento]; i++) {
                    estructura[centroIndex].conectados.push(elemento);
                    centroIndex = (centroIndex + 1) % centroCantidad;
                }
            }
            
            return estructura;
        }

        function dibujarAtomo(ctx, x, y, elemento, electrones) {
            const radio = 25;
            
            // Dibujar círculo del átomo
            ctx.beginPath();
            ctx.arc(x, y, radio, 0, 2 * Math.PI);
            ctx.fillStyle = elementos[elemento].color;
            ctx.fill();
            ctx.strokeStyle = '#5eead4';
            ctx.lineWidth = 2;
            ctx.stroke();
            
            // Dibujar símbolo del elemento
            ctx.fillStyle = elemento === 'H' ? '#0f172a' : '#e2e8f0';
            ctx.font = 'bold 20px Arial';
            ctx.textAlign = 'center';
            ctx.textBaseline = 'middle';
            ctx.fillText(elemento, x, y);
            
            // Dibujar electrones solitarios
            const electronesSolitarios = electrones % 2 === 0 ? 0 : 1;
            const electronesPares = Math.floor((electrones - electronesSolitarios) / 2);
            
            for (let i = 0; i < electronesPares; i++) {
                const angulo = (i * Math.PI * 2) / electronesPares;
                const ex = x + Math.cos(angulo) * (radio + 15);
                const ey = y + Math.sin(angulo) * (radio + 15);
                
                ctx.beginPath();
                ctx.arc(ex, ey, 3, 0, 2 * Math.PI);
                ctx.fillStyle = '#5eead4';
                ctx.fill();
                
                const ex2 = x + Math.cos(angulo) * (radio + 25);
                const ey2 = y + Math.sin(angulo) * (radio + 25);
                
                ctx.beginPath();
                ctx.arc(ex2, ey2, 3, 0, 2 * Math.PI);
                ctx.fillStyle = '#5eead4';
                ctx.fill();
            }
            
            if (electronesSolitarios > 0) {
                ctx.beginPath();
                ctx.arc(x, y - radio - 15, 3, 0, 2 * Math.PI);
                ctx.fillStyle = '#5eead4';
                ctx.fill();
            }
        }

        function dibujarEnlace(ctx, x1, y1, x2, y2, orden) {
            const dx = x2 - x1;
            const dy = y2 - y1;
            const distancia = Math.sqrt(dx * dx + dy * dy);
            const ux = dx / distancia;
            const uy = dy / distancia;
            
            const offset = 5;
            
            ctx.strokeStyle = '#cbd5e1';
            ctx.lineWidth = 2;
            
            for (let i = 0; i < orden; i++) {
                const desfase = (i - (orden - 1) / 2) * offset;
                const sx = x1 + ux * 25 + uy * desfase;
                const sy = y1 + uy * 25 - ux * desfase;
                const ex = x2 - ux * 25 + uy * desfase;
                const ey = y2 - uy * 25 - ux * desfase;
                
                ctx.beginPath();
                ctx.moveTo(sx, sy);
                ctx.lineTo(ex, ey);
                ctx.stroke();
            }
        }

        function generarDiagrama() {
            const formula = document.getElementById('formula').value.trim();
            const errorDiv = document.getElementById('error');
            const infoDiv = document.getElementById('info');
            
            errorDiv.textContent = '';
            
            if (!formula) {
                errorDiv.textContent = 'Por favor ingrese una fórmula química';
                return;
            }
            
            try {
                const elementos = parsearFormula(formula);
                const estructura = generarEstructura(elementos);
                
                const canvas = document.getElementById('canvas');
                const ctx = canvas.getContext('2d');
                
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                
                const centroX = canvas.width / 2;
                const centroY = canvas.height / 2;
                
                // Dibujar estructura
                if (estructura.length === 1) {
                    const mol = estructura[0];
                    const atomoCentral = mol.central;
                    const conectados = mol.conectados;
                    
                    // Dibujar átomo central
                    dibujarAtomo(ctx, centroX, centroY, atomoCentral, elementos[atomoCentral].valencia);
                    
                    // Dibujar átomos conectados
                    const angulo = (2 * Math.PI) / conectados.length;
                    for (let i = 0; i < conectados.length; i++) {
                        const x = centroX + Math.cos(i * angulo) * 100;
                        const y = centroY + Math.sin(i * angulo) * 100;
                        
                        dibujarAtomo(ctx, x, y, conectados[i], elementos[conectados[i]].valencia - 1);
                        dibujarEnlace(ctx, centroX, centroY, x, y, 1);
                    }
                }
                
                // Mostrar información
                infoDiv.style.display = 'block';
                
                const elementosInfo = document.getElementById('elementos-info');
                elementosInfo.innerHTML = '';
                
                for (const [elemento, cantidad] of Object.entries(elementos)) {
                    const div = document.createElement('div');
                    div.className = 'element-info';
                    div.innerHTML = `<strong>${elemento}:</strong> ${cantidad} átomo(s)`;
                    elementosInfo.appendChild(div);
                }
                
                const electronesTotal = calcularElectronesTotales(elementos);
                document.getElementById('electrones-total').textContent = `Electrones totales: ${electronesTotal}`;
                document.getElementById('electrones-compartidos').textContent = `Pares de electrones compartidos: ${Math.floor(estructura[0].conectados.length / 2)}`;
                document.getElementById('electrones-solos').textContent = `Electrones solitarios: ${electronesTotal % 2}`;
                
            } catch (error) {
                errorDiv.textContent = 'Error al procesar la fórmula. Asegúrese de usar mayúsculas (ej: H2O, CO2, NH3)';
            }
        }

        // Permitir generar con Enter
        document.getElementById('formula').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                generarDiagrama();
            }
        });
    </script>
</body>
</html>
```